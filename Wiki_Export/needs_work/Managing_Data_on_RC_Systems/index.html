



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for the centrally provided Research Computing HPC services at UCL.">
      
      
        <link rel="canonical" href="http://rits.github-pages.ucl.ac.uk/mkdocs-rc-docs/Wiki_Export/needs_work/Managing_Data_on_RC_Systems/">
      
      
        <meta name="author" content="UCL RCAS Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.2.0">
    
    
      
        <title>Managing Data on RC Systems</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.750b69bd.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#managing-data-on-research-computing-systems" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://rits.github-pages.ucl.ac.uk/mkdocs-rc-docs/" title="UCL Research Computing Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../../img/portico.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              UCL Research Computing Documentation
            </span>
            <span class="md-header-nav__topic">
              Managing Data on RC Systems
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/UCL-RITS/mkdocs-rc-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    UCL-RITS/mkdocs-rc-docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://rits.github-pages.ucl.ac.uk/mkdocs-rc-docs/" title="UCL Research Computing Documentation" class="md-nav__button md-logo">
      
        <img src="../../../img/portico.svg" width="48" height="48">
      
    </a>
    UCL Research Computing Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/UCL-RITS/mkdocs-rc-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    UCL-RITS/mkdocs-rc-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Welcome to MkDocs" class="md-nav__link">
      Welcome to MkDocs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Contact_Us/" title="Contact and Support" class="md-nav__link">
      Contact and Support
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../howto/" title="How do I?" class="md-nav__link">
      How do I?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Systems
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Systems
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Systems/Aristotle/" title="Aristotle" class="md-nav__link">
      Aristotle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Systems/Grace/" title="Grace" class="md-nav__link">
      Grace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Systems/Legion/" title="Legion" class="md-nav__link">
      Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Systems/Michael/" title="MMM Michael" class="md-nav__link">
      MMM Michael
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Systems/Myriad/" title="Myriad" class="md-nav__link">
      Myriad
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Systems/Thomas/" title="MMM Thomas" class="md-nav__link">
      MMM Thomas
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Wiki Export
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Wiki Export
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="Research Computing Services" class="md-nav__link">
      Research Computing Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Accessing_RC_Systems/" title="Accessing RC Systems" class="md-nav__link">
      Accessing RC Systems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Account_Services/" title="Account Services" class="md-nav__link">
      Account Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Acknowledging_RC_Systems/" title="Acknowledging the Use of RC Systems" class="md-nav__link">
      Acknowledging the Use of RC Systems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Additional_Resource_Requests/" title="Additional Resource Requests" class="md-nav__link">
      Additional Resource Requests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Batch_Processing/" title="Batch Processing" class="md-nav__link">
      Batch Processing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Building_and_Running_Matlab_Programs/" title="Building and Running Matlab Programs" class="md-nav__link">
      Building and Running Matlab Programs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Cluster_Computing/" title="Cluster Computing" class="md-nav__link">
      Cluster Computing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Compiling/" title="Compiling your code" class="md-nav__link">
      Compiling your code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Connecting_to_Research_Data_Services/" title="Connecting to Research Data Services" class="md-nav__link">
      Connecting to Research Data Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Example_Submission_Scripts/" title="Example Submission Scripts" class="md-nav__link">
      Example Submission Scripts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../FAQ/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../GPU_Clusters/" title="GPU clusters" class="md-nav__link">
      GPU clusters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../GPU_Nodes/" title="GPU nodes" class="md-nav__link">
      GPU nodes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Installing_PGI/" title="Installing PGI" class="md-nav__link">
      Installing PGI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Interactive_Jobs/" title="Interactive Job Sessions" class="md-nav__link">
      Interactive Job Sessions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Known_Issues/" title="Known Issues" class="md-nav__link">
      Known Issues
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../News_and_Events/" title="News and Events" class="md-nav__link">
      News and Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Paid-For_Resources/" title="Paid-For Resources" class="md-nav__link">
      Paid-For Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Planned_Service_Outages/" title="Planned Service Outages" class="md-nav__link">
      Planned Service Outages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Points_of_Contact/" title="Points of Contact" class="md-nav__link">
      Points of Contact
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Publications/" title="Publications" class="md-nav__link">
      Publications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Quick_Start/" title="Legion Quick Start" class="md-nav__link">
      Legion Quick Start
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../RC_Systems/" title="Research Computing Platforms" class="md-nav__link">
      Research Computing Platforms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../RC_Systems_user_environment/" title="RC Systems user environment" class="md-nav__link">
      RC Systems user environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Reporting_problems/" title="Reporting problems" class="md-nav__link">
      Reporting problems
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Research_Computing_Glossary/" title="Research Computing Glossary" class="md-nav__link">
      Research Computing Glossary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Terms_and_Conditions/" title="Terms and Conditions" class="md-nav__link">
      Terms and Conditions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../The_Scheduler/" title="How the scheduler works" class="md-nav__link">
      How the scheduler works
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Training/" title="Training" class="md-nav__link">
      Training
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../UCL_UK_e-Science_Certificates/" title="UCL UK e-Science Certificates" class="md-nav__link">
      UCL UK e-Science Certificates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../User_Scripts/" title="User Scripts" class="md-nav__link">
      User Scripts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../X-Forwarding/" title="X-Forwarding" class="md-nav__link">
      X-Forwarding
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../X11_Forwarding_with_Windows/" title="X11 Forwarding With Windows" class="md-nav__link">
      X11 Forwarding With Windows
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-35" type="checkbox" id="nav-5-35" checked>
    
    <label class="md-nav__link" for="nav-5-35">
      Needs work
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-35">
        Needs work
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Managing Data on RC Systems
      </label>
    
    <a href="./" title="Managing Data on RC Systems" class="md-nav__link md-nav__link--active">
      Managing Data on RC Systems
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#copying-files-using-linux-or-mac-os-x" title="Copying files using Linux or Mac OS X" class="md-nav__link">
    Copying files using Linux or Mac OS X
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scp" title="scp" class="md-nav__link">
    scp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp" title="sftp" class="md-nav__link">
    sftp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsync" title="rsync" class="md-nav__link">
    rsync
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copying-files-using-windows-and-winscp" title="Copying files using Windows and WinSCP" class="md-nav__link">
    Copying files using Windows and WinSCP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transferring-files-from-outside-the-ucl-firewall" title="Transferring files from outside the UCL firewall" class="md-nav__link">
    Transferring files from outside the UCL firewall
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-step-login-on-linux-or-mac-os-x-using-tunnelling" title="Single-step login on Linux or Mac OS X using tunnelling" class="md-nav__link">
    Single-step login on Linux or Mac OS X using tunnelling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-step-login-on-windows-using-tunnelling" title="Single-step login on Windows using tunnelling" class="md-nav__link">
    Single-step login on Windows using tunnelling
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Resource_Allocation/" title="Resource Allocation" class="md-nav__link">
      Resource Allocation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Running_Hybrid_OpenMP__MPI_Code/" title="Running Hybrid OpenMP/MPI Code" class="md-nav__link">
      Running Hybrid OpenMP/MPI Code
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Summary_of_Legion_changes/" title="Summary of Legion changes" class="md-nav__link">
      Summary of Legion changes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-36" type="checkbox" id="nav-5-36">
    
    <label class="md-nav__link" for="nav-5-36">
      Software
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-36">
        Software
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-36-1" type="checkbox" id="nav-5-36-1">
    
    <label class="md-nav__link" for="nav-5-36-1">
      Done
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-36-1">
        Done
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/ANSYS/" title="ANSYS Software" class="md-nav__link">
      ANSYS Software
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/ATLAS/" title="ATLAS" class="md-nav__link">
      ATLAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/BEAST/" title="BEAST" class="md-nav__link">
      BEAST
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/CASTEP/" title="CASTEP" class="md-nav__link">
      CASTEP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/FSL/" title="FSL" class="md-nav__link">
      FSL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/FreeSurfer/" title="FreeSurfer" class="md-nav__link">
      FreeSurfer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/MKL/" title="MKL" class="md-nav__link">
      MKL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/OpenBLAS/" title="OpenBLAS" class="md-nav__link">
      OpenBLAS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/Quantum_Espresso/" title="Quantum Espresso" class="md-nav__link">
      Quantum Espresso
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/done/R_packages_available_on_Legion/" title="R packages available on Legion" class="md-nav__link">
      R packages available on Legion
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-36-2" type="checkbox" id="nav-5-36-2">
    
    <label class="md-nav__link" for="nav-5-36-2">
      Unedited
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-5-36-2">
        Unedited
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_CP2K_on_Legion/" title="Running CP2K on Legion" class="md-nav__link">
      Running CP2K on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_DL_Poly_4_on_Legion/" title="Running DL Poly 4 on Legion" class="md-nav__link">
      Running DL Poly 4 on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_DL_Poly_Classic_1.2_on_Legion/" title="Running DL Poly Classic 1.2 on Legion" class="md-nav__link">
      Running DL Poly Classic 1.2 on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_DL_Poly_Classic_1.9_on_Legion/" title="Running DL Poly Classic 1.9 on Legion" class="md-nav__link">
      Running DL Poly Classic 1.9 on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_DTI-TK_on_Legion/" title="Running DTI-TK on Legion" class="md-nav__link">
      Running DTI-TK on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_GROMACS_on_Legion/" title="Running GROMACS on Legion" class="md-nav__link">
      Running GROMACS on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_GaussView_5_on_Legion/" title="Running GaussView 5 on Legion" class="md-nav__link">
      Running GaussView 5 on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_Gaussian_03_on_Legion/" title="Running Gaussian 03 on Legion" class="md-nav__link">
      Running Gaussian 03 on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_Gaussian_09_on_Legion/" title="Running Gaussian 09 on Legion" class="md-nav__link">
      Running Gaussian 09 on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_LAMMPS_on_Legion/" title="Running LAMMPS on Legion" class="md-nav__link">
      Running LAMMPS on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_ROOT_on_Legion/" title="Running ROOT on Legion" class="md-nav__link">
      Running ROOT on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_R_3.0.1_on_Legion/" title="Running R 3.0.1 on Legion" class="md-nav__link">
      Running R 3.0.1 on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_SPM_on_Legion/" title="Running SPM on Legion" class="md-nav__link">
      Running SPM on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_StarCCM%2B_on_Legion/" title="Running StarCCM+ on Legion" class="md-nav__link">
      Running StarCCM+ on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_StarCD_on_Legion/" title="Running StarCD on Legion" class="md-nav__link">
      Running StarCD on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_Stata__MP_on_Legion/" title="Running Stata/MP on Legion" class="md-nav__link">
      Running Stata/MP on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_TopHat_on_Legion/" title="Running TopHat on Legion" class="md-nav__link">
      Running TopHat on Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../software/unedited/Running_TractoR_on_Legion/" title="Running TractoR on Legion" class="md-nav__link">
      Running TractoR on Legion
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#copying-files-using-linux-or-mac-os-x" title="Copying files using Linux or Mac OS X" class="md-nav__link">
    Copying files using Linux or Mac OS X
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scp" title="scp" class="md-nav__link">
    scp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sftp" title="sftp" class="md-nav__link">
    sftp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsync" title="rsync" class="md-nav__link">
    rsync
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copying-files-using-windows-and-winscp" title="Copying files using Windows and WinSCP" class="md-nav__link">
    Copying files using Windows and WinSCP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transferring-files-from-outside-the-ucl-firewall" title="Transferring files from outside the UCL firewall" class="md-nav__link">
    Transferring files from outside the UCL firewall
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-step-login-on-linux-or-mac-os-x-using-tunnelling" title="Single-step login on Linux or Mac OS X using tunnelling" class="md-nav__link">
    Single-step login on Linux or Mac OS X using tunnelling
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-step-login-on-windows-using-tunnelling" title="Single-step login on Windows using tunnelling" class="md-nav__link">
    Single-step login on Windows using tunnelling
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/UCL-RITS/mkdocs-rc-docs/blob/master/mkdocs-project-dir/docs/Wiki_Export/needs_work/Managing_Data_on_RC_Systems.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="managing-data-on-research-computing-systems">Managing Data on Research Computing Systems<a class="headerlink" href="#managing-data-on-research-computing-systems" title="Permanent link">&para;</a></h1>
<p>This section contains information about storage hierarchy in RC systems
and the ways in which you can move data in and out of them.</p>
<p>These services should not be used to store data for which you have
obligations under the UK Data Protection Act 1998. For further
information and advice, please see:</p>
<p><a href="http://www.ico.org.uk/for_organisations/data_protection/the_guide">http://www.ico.org.uk/for_organisations/data_protection/the_guide</a></p>
<p>At some point, you are going to need to copy input files on to our
systems and copy your results back to your local machine or to a backup
elsewhere. (It is good practice to always make your own backups). First
we give generic instructions for doing so - do also check the
machine-specific information on this page for details about things like
dedicated transfer nodes, different file storage areas and quotas.</p>
<h2 id="copying-files-using-linux-or-mac-os-x">Copying files using Linux or Mac OS X<a class="headerlink" href="#copying-files-using-linux-or-mac-os-x" title="Permanent link">&para;</a></h2>
<p>You can use the command-line utilities scp, sftp or rsync to copy your
data about.</p>
<p>Note that as our systems use Linux, you can use these instructions to
copy data between systems (e.g. from Legion to Myriad) as well as from
your own computer to a system.</p>
<h3 id="scp">scp<a class="headerlink" href="#scp" title="Permanent link">&para;</a></h3>
<p>This will copy a data file from somewhere on your local machine to a
specified location on the remote
machine.</p>
<div class="codehilite"><pre><span></span>scp &lt;local_data_file&gt; &lt;remote_user_id&gt;@&lt;remote_hostname&gt;:&lt;remote_path&gt;
</pre></div>


<p>This will do the reverse, copying from the remote machine to your local
machine. (Run from your local
machine).</p>
<div class="codehilite"><pre><span></span>scp &lt;remote_user_id&gt;@&lt;remote_hostname&gt;:&lt;remote_path&gt;&lt;remote_data_file&gt; &lt;local_path&gt;
</pre></div>


<p>To copy a whole directory with all its contents, use the <code>-r</code>
option:</p>
<div class="codehilite"><pre><span></span>scp -r &lt;local_directory&gt; &lt;remote_user_id&gt;@&lt;remote_hostname&gt;:&lt;remote_path&gt;
</pre></div>


<h3 id="sftp">sftp<a class="headerlink" href="#sftp" title="Permanent link">&para;</a></h3>
<p>You can use sftp to log in to the remote machine, navigate through
directories and use put and get to copy files from and to your local
machine. <code>lcd</code> and <code>lls</code> are local equivalents of <code>cd</code> and <code>ls</code> so you
can navigate through your local directories as you go.</p>
<div class="codehilite"><pre><span></span>sftp &lt;remote_user_id&gt;@&lt;remote_hostname&gt;  
cd &lt;remote_path&gt;  
get &lt;remote_file&gt;  
lcd &lt;local_path&gt;  
put &lt;local_file&gt;
</pre></div>


<h3 id="rsync">rsync<a class="headerlink" href="#rsync" title="Permanent link">&para;</a></h3>
<p>Rsync is used to remotely synchronise directories, so can be used to
only copy files which have changed. Have a look at the man pages as
there are many options.</p>
<h2 id="copying-files-using-windows-and-winscp">Copying files using Windows and WinSCP<a class="headerlink" href="#copying-files-using-windows-and-winscp" title="Permanent link">&para;</a></h2>
<p>WinSCP is a graphical client that you can use for scp or sftp.</p>
<ol>
<li>The login/create new session screen will open if this is the first
    time you are using WinSCP.</li>
<li>You can choose SFTP or SCP as the file protocol. If you have an
    unstable connection with one, you may wish to try the other. SCP is
    probably generally better.</li>
<li>Fill in the hostname of the machine you wish to connect to, your
    username and password.</li>
<li>Click Save and give your settings a useful name.</li>
<li>You'll then be shown your list of Stored sessions, which will have
    the one you just created.</li>
<li>Select the session and click Login.</li>
</ol>
<h2 id="transferring-files-from-outside-the-ucl-firewall">Transferring files from outside the UCL firewall<a class="headerlink" href="#transferring-files-from-outside-the-ucl-firewall" title="Permanent link">&para;</a></h2>
<p>To transfer files when you are outside UCL's network, you can use the
<a href="http://www.ucl.ac.uk/isd/staff/network/vpn">IS VPN</a>, which will allow
you to ssh directly into Legion or login05 as if you were inside the
network, without having to go via Socrates first.</p>
<p>If not using the VPN, you will need to do some form of ssh tunnelling -
read on.</p>
<h2 id="single-step-login-on-linux-or-mac-os-x-using-tunnelling">Single-step login on Linux or Mac OS X using tunnelling<a class="headerlink" href="#single-step-login-on-linux-or-mac-os-x-using-tunnelling" title="Permanent link">&para;</a></h2>
<p>Inside your <code>~/.ssh</code> directory on your local machine, add the below to
your config file (or create a file called config if you don't already
have one).</p>
<p>Generically, it should be of this form where <name> can be anything you
want to call this
entry.</p>
<div class="codehilite"><pre><span></span>Host &lt;name&gt;  
   User &lt;your.username&gt;  
   HostName &lt;full.hostname&gt;  
   proxyCommand ssh -W &lt;full.hostname&gt;:22 &lt;your.username&gt;@socrates.ucl.ac.uk
</pre></div>


<p>Here are some examples - you can have as many of these as you need in
your config
file.</p>
<div class="codehilite"><pre><span></span>Host legion  
   User &lt;your.username&gt;  
   HostName legion.rc.ucl.ac.uk  
   proxyCommand ssh -W legion.rc.ucl.ac.uk:22 &lt;your.username&gt;@socrates.ucl.ac.uk

Host login05  
   User &lt;your.username&gt;  
   HostName login05.external.legion.ucl.ac.uk  
   proxyCommand ssh -W login05.external.legion.ucl.ac.uk:22 &lt;your.username&gt;@socrates.ucl.ac.uk

Host aristotle  
   User &lt;your.username&gt;  
   HostName aristotle.rc.ucl.ac.uk  
   proxyCommand ssh -W aristotle.rc.ucl.ac.uk:22 &lt;your.username&gt;@socrates.ucl.ac.uk
</pre></div>


<p>You can now just do <code>ssh legion</code> or <code>scp aristotle</code> and you will go
through Socrates. You'll be asked for login details twice since you're
logging in to two machines. (Socrates uses central UCL credentials).</p>
<h2 id="single-step-login-on-windows-using-tunnelling">Single-step login on Windows using tunnelling<a class="headerlink" href="#single-step-login-on-windows-using-tunnelling" title="Permanent link">&para;</a></h2>
<p>WinSCP can also set up SSH tunnels.</p>
<ol>
<li>Create a new session as before, and tick the <em>Advanced options</em> box
    in the bottom left corner.</li>
<li>Select <em>Connection > Tunnel</em> from the left pane.</li>
<li>Tick the <em>Connect through SSH tunnel</em> box and enter the hostname of
    the gateway you are tunnelling through, for example
    <code>socrates.ucl.ac.uk</code></li>
<li>Fill in your username and password for that host. (Central UCL ones
    for Socrates).</li>
<li>Select <em>Session</em> from the left pane and fill in the hostname you
    want to end up on after the tunnel.</li>
<li>Fill in your username and password for that host and set the file
    protocol to SCP.</li>
<li>Save your settings with a useful name.</li>
</ol>
<h1 id="managing-your-quota">Managing your quota<a class="headerlink" href="#managing-your-quota" title="Permanent link">&para;</a></h1>
<p>To check your quota, run the command <code>lquota</code>. (Note: not currently
available on Grace or Thomas - see below). Also useful is <code>du</code>, giving
you information about your disk usage. For example, <code>du -ch &lt;dir&gt;</code> 
will give you a summary of the sizes of directory tree and
subtrees, in human-readable sizes, with a total at the bottom. 
<code>du -h --max-depth=1</code> will show you the totals for all top-level directories
relative to where you are, plus the grand total. These can help you
track down the locations of large amounts of data if you need to reduce
your disk usage.</p>
<p>To check your quota on Grace and Thomas, please run <code>quota_check</code>. This
is part of the <code>userscripts</code> module which is loaded by default.</p>
<p>Quotas for Lustre storage on Legion are automatically checked: if you
use more than your quota for 14 days continuously, you will be prevented
from submitting more jobs.</p>
<p>We can increase quotas on-demand for small amounts, but for large
amounts of storage (typically ~1TB or larger), a request must be
submitted as described <a href="Additional_Resource_Requests">on the "Additional Resource Requests" page</a>.</p>
<p>Please contact <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#99;&#45;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#117;&#99;&#108;&#46;&#97;&#99;&#46;&#117;&#107;">&#114;&#99;&#45;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#117;&#99;&#108;&#46;&#97;&#99;&#46;&#117;&#107;</a> for more information.</p>
<h1 id="accessing-research-data-storage">Accessing Research Data Storage<a class="headerlink" href="#accessing-research-data-storage" title="Permanent link">&para;</a></h1>
<p>To access data stored in Research Data Storage, you can use scp to
transfer data to/from the RC Services machine. Here is a guide on
<a href="Connecting_to_Research_Data_Services" title="wikilink">Connecting to Research Data Services</a>.</p>
<h1 id="legion-specific-information">Legion-specific information<a class="headerlink" href="#legion-specific-information" title="Permanent link">&para;</a></h1>
<p>To transfer your data to and from Legion in the most efficient manner,
you must have a basic understanding of the bandwidth limitations of the
machine.</p>
<p>The entire system is limited by a 10Gb ethernet connection to UCL's
network. If you find a significantly lower throughput, this may be
caused by a bottleneck along the path between Legion and the machine you
are trying to send the data to/from.</p>
<p>Login and compute nodes are individually connected to the network via
1Gb/s links. This means that the maximum theoretical throughput that you
can expect from any node in Legion is 125MB/s. Taking into account
protocol overheads, you should see a maximum throughput of around
100MB/s on each node.</p>
<p>For this reason we have to make the distinction between transferring
large and modest amounts of data.</p>
<h2 id="transferring-modest-amounts-of-data">Transferring modest amounts of data<a class="headerlink" href="#transferring-modest-amounts-of-data" title="Permanent link">&para;</a></h2>
<p>You can use Legion's login nodes to transfer modest amounts of data.</p>
<p>Please bear in mind that there is no limit on the number of users that
can be logged in to the Login nodes. Their activity may cause your data
transfer rates to drop (as yours may affect theirs). If you need to
transfer large amounts of data or need more reliable transfer rates, we
recommend that you do so within a batch job, as described in the
following section.</p>
<p>If you are running scp from your local machine, use
<code>legion.rc.ucl.ac.uk</code> as the hostname and you will transfer via the
login nodes.</p>
<h2 id="dedicated-transfer-node">Dedicated transfer node<a class="headerlink" href="#dedicated-transfer-node" title="Permanent link">&para;</a></h2>
<p>Legion provides a dedicated transfer node with ten gigabit network
connections to the UCL network and to Legion. To access this node, log
in via scp, sftp or ssh to:</p>
<div class="codehilite"><pre><span></span>login05.external.legion.ucl.ac.uk
</pre></div>


<p>Please note that you cannot submit or view the status of your compute
jobs on this node - it is only available for data transfer.</p>
<h2 id="legions-storage-architecture-and-hierarchy">Legion's storage architecture and hierarchy<a class="headerlink" href="#legions-storage-architecture-and-hierarchy" title="Permanent link">&para;</a></h2>
<p>Legion has three types of storage with distinct levels of performance,
volatility and reliability:</p>
<h3 id="home-directories-home">Home directories ($HOME)<a class="headerlink" href="#home-directories-home" title="Permanent link">&para;</a></h3>
<ul>
<li>Smaller amount of storage</li>
<li>Backed up</li>
<li>Read-only access from compute nodes</li>
</ul>
<p>This storage has currently a hard quota of 50GB per user. It is the most
reliable. But due to contention between several users it has very high
performance variability. You can read and write to it from the login
nodes, but only read access is granted from the compute nodes. The
rationale for this stems from the fact that it cannot withstand large
amounts of Input/Output such as that which happens within a large
cluster like Legion. This is also to make sure that only important data
is backed up as otherwise there would be excessive load on the backup
system both in terms of performance and capacity.</p>
<h3 id="shared-scratch-area-homescratch">Shared scratch area ($HOME/Scratch)<a class="headerlink" href="#shared-scratch-area-homescratch" title="Permanent link">&para;</a></h3>
<ul>
<li>Larger storage</li>
<li>Not backed up</li>
<li>Writable by compute nodes</li>
</ul>
<p>The <code>Scratch</code> entry in your home directory is a symbolic link to the Lustre file system attached to
Legion. This storage has very high throughput on individual files and
allows separate processes on different machines to open the same file
for I/O simultaneously. Due to its complexity, it performs very poorly
when handling large amounts of small files. For example, running the
“find” command on a directory within <code>$HOME/Scratch</code> has much poorer
performance than running in a directory stored under <code>$HOME</code>. Again, due
to its complexity, it is prone to failure and may have to be completely
reformatted if file system errors build up. Therefore, we give no
guarantee that data stored on this file system is safe and strongly
recommend that you save any important data as soon as possible to your
$HOME directory via login nodes or any other external backup storage.</p>
<p>Scratch and its underlying hardware are of vital importance for the good
operation of the cluster in terms of I/O performance. Because this
resource is scarce, the
<a href="http://www.ucl.ac.uk/isd/about/governance/research-it/crag">CRAG</a> has
enforced usage quotas, to be reviewed monthly. The use of Scratch is now
subject to the following policies:</p>
<ul>
<li>
<p>All users will be granted an initial Scratch quota. Users are free
    to work within this quota but should note that files stored in their
    Scratch directory are NOT backed up and should therefore be
    considered ‘at risk’.</p>
</li>
<li>
<p>Users may request increases in their Scratch quota by <a href="https://wiki.rc.ucl.ac.uk/wiki/Legion_Priority_Access">submitting a
    form</a> to
    <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#99;&#45;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#117;&#99;&#108;&#46;&#97;&#99;&#46;&#117;&#107;">&#114;&#99;&#45;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#117;&#99;&#108;&#46;&#97;&#99;&#46;&#117;&#107;</a>. They will be required to explain why they
    need an increase from a technical and computational point of view.</p>
</li>
<li>
<p>The Scratch quota will be implemented as a soft quota so users will
    be able to temporarily exceed their quota for a short period. This
    period is set to 14 days by default.</p>
</li>
<li>
<p>When a user exceeds their Scratch quota a warning is added to their
    Legion Message of the Day (MOTD) and an email is sent to their UCL
    email address. The warnings will display how much they are over
    quota, how long they have to reduce their usage and what will happen
    if they fail to reduce their usage.</p>
</li>
<li>
<p>While a user continues to use more than their Scratch quota
    subsequent warning emails will be sent by the system every day.</p>
</li>
<li>
<p>If a user reduces their usage of Scratch to below their quota within
    the 14 day grace period, no further action will be taken.</p>
</li>
<li>
<p>At the end of the 14 day grace period if a user hasn't reduced their
    Scratch usage to below their quota, the system will stop the user
    from submitting any jobs until their Scratch usage is below their
    quota.</p>
</li>
<li>
<p>In addition to user Scratch quotas there will be an overall limit on
    Lustre usage of 75% of total space, in order to ensure performance
    is maintained. If this limit is exceeded, ALL Legion users will be
    informed by email to their UCL email address of the risk to Lustre
    and requested to delete or move unwanted or currently unused files.</p>
</li>
</ul>
<h3 id="local-node-scratch-area-tmpdir">Local node scratch area (<code>$TMPDIR</code>)<a class="headerlink" href="#local-node-scratch-area-tmpdir" title="Permanent link">&para;</a></h3>
<ul>
<li>Only exists during your job</li>
<li>Fastest access as is local</li>
</ul>
<p>This storage resides on the hard drive installed in the compute nodes.
It is only accessible temporarily throughout the duration of the job you
have submitted and only within each of the compute nodes assigned to
you. The path to this storage is set at run time in the <code>$TMPDIR</code>
environment variable. This variable is set only within a shell generated
by the SGE scheduler, and the path therein is unique to the node and job
you are running. Once your job has completed the <code>$TMPDIR</code> directory is
deleted on each node, so make sure that you have given enough wall clock
time to allow data to be transferred back to your scratch area. Note
that in parallel jobs running <em>N</em> slots (processes) only the main node (
slot 1 ) can be scripted as the remaining <em>N</em>-1 ones are just used to run
compute processes without shell interaction - this means that your
parallel program should only write to this local storage on process 1
(or 0, depending on the programming language). Users may automate the
transfer of data from $TMPDIR to their scratch area by adding the
directive <code>#Local2Scratch</code> to their job script.</p>
<p>The amount of space available in $TMPDIR is controlled on a per node
basis by the <code>#$ -l tmpfs</code> grid engine directive. This is to stop jobs
interfering with each other by running out of disk space. If this
directive is omitted from job scripts, then a default of 10 Gigabytes
per node will be allocated to the job. For example to request 15 GB
include the following in the job script: </p>
<div class="codehilite"><pre><span></span>#$ -l tmpfs=15G
</pre></div>


<p>The following diagram illustrates how these various levels of storage
relate to login and compute nodes:</p>
<p><img alt="Storage_diagram.jpeg" src="Storage_diagram.jpeg" title="Storage_diagram.jpeg" /></p>
<h2 id="transferring-files-to-or-from-legion-using-a-batch-job">Transferring files to or from Legion using a batch job<a class="headerlink" href="#transferring-files-to-or-from-legion-using-a-batch-job" title="Permanent link">&para;</a></h2>
<p><strong>Note: we recommend using the dedicated transfer node, as explained
above, to perform large transfers. This method should only be used if
the transfer node is unavailable for some reason.</strong></p>
<p>Using a batch job you can transfer multiple files or sections of a file
simultaneously via each compute node directly onto Lustre, maximising
the use of 10Gb/s link that connects Legion to the UCL network.</p>
<p>You can use the scp or sftp commands on Legion to do file transfers
between Legion and some remote machine of your choice, but both of these
commands need to log in to the remote machine, and they need to do this
WITHOUT any need for interactive input, i.e. without needing you to
supply a password.</p>
<p>The recommended method of doing this is to use RSA based authentication,
i.e. using an SSH public/private key pair, generated by (for example)
the Unix command <code>ssh-keygen</code>.</p>
<h3 id="setting-up-the-necessary-authentication-keys">Setting up the necessary Authentication Keys<a class="headerlink" href="#setting-up-the-necessary-authentication-keys" title="Permanent link">&para;</a></h3>
<p>If you already have such a key pair for other purposes (e.g. for
password-less login to Legion from your desktop machine), then all you
need to do is to copy the private key file <code>id_rsa</code> into the <code>~/.ssh</code>
directory in your Legion home directory (making sure that it is readable
only by you), and also copy the contents of the public key file
<code>id_rsa.pub</code> into the file</p>
<p><code>authorized_keys</code></p>
<p>in the <code>~/.ssh</code> directory on your remote machine.</p>
<p>If you haven't generated an SSH key pair before, simply run this command
on Legion:</p>
<div class="codehilite"><pre><span></span>ssh-keygen -t rsa
</pre></div>


<p>pressing return when it asks for passphrase. This will generate
the key pair in the following two files in the directory .ssh in your
Legion home directory:</p>
<p><code>id_rsa</code> (the private key)</p>
<p>and</p>
<p><code>id_rsa.pub</code> (the public key)</p>
<p>Finally, you need to copy the contents of the public key <code>id_rsa.pub</code>
into the file <code>authorized_keys</code> (creating it first if necessary), in the
<code>.ssh</code> directory under your home directory on your remote machine.</p>
<p>Note that, in general, the private key is in the .ssh directory of the
machine you are making the SSH connection FROM, and the public key is in
the <code>~/.ssh</code> directory of the machine you are connecting TO. You may well wish to
connect between your remote machine and Legion in BOTH directions, e.g.
to both SSH into Legion, and to allow Legion to do an scp/sftp file
transfer to your remote machine: in this case you will have both public
and private keys in the <code>.ssh</code> directories on both machines, thus allowing
password-less connection in both directions.</p>
<p>In the above description it is assumed that you are using a remote Unix
machine; this method also works with a remote Windows machine, though
the location of the <code>.ssh</code> directory is different, and may depend on your
version of Windows.</p>
<h3 id="using-scp-or-sftp-without-interactive-input-in-a-batch-job">Using SCP or SFTP without interactive input in a batch job<a class="headerlink" href="#using-scp-or-sftp-without-interactive-input-in-a-batch-job" title="Permanent link">&para;</a></h3>
<p>Having set up the SSH keys as described above, you can now use scp or
sftp to do file transfer within a batch job. For instance, you could use
an scp command like this: </p>
<div class="codehilite"><pre><span></span>scp my_results &lt;my_remote_userid&gt;@&lt;my_remote_hostname&gt;:legion_files/my_results
</pre></div>


<p>This will copy your Legion file <code>my_results</code> into a file of the
same name in the directory <code>legion_files</code> on your remote machine
<code>&lt;my_remote_hostname&gt;</code>. Note that the directory <code>legion_files</code> must already
exist.</p>
<p>Similarly, you could copy a data file from <code>legion_files</code> on your remote
machine to Legion, but with one caviat - your <code>$HOME</code> directory in Legion
is read-only, as viewed by the worker nodes! You must therefore copy
your data to <code>$HOME/Scratch</code>:</p>
<div class="codehilite"><pre><span></span>scp &lt;my_remote_userid&gt;@&lt;my_remote_hostname&gt;:legion_files/my_results $HOME/Scratch/my_results
</pre></div>


<p>Either of these commands should be embedded in a simple job
script like the one in the example below, which should be submitted
using qsub (remember to supply your correct consortium and project for
the job): </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/bin/bash -l  </span>
<span class="c1">#$ -N Data_transfer  </span>
<span class="c1">#$ -l h_rt=1:0:0  </span>
<span class="c1">#$ -l mem=1G  </span>
<span class="c1">#$ -P &lt;your_project_name&gt;  </span>
<span class="c1">#$ -wd /home/&lt;your_user_id&gt;/Scratch  </span>
&lt;scp_command&gt;
</pre></div>
</td></tr></table>

<p>You can also use sftp to do a similar job, though in this case
the situation is complicated by the fact that sftp normally takes its
commands interactively.</p>
<p>To get round this, supply the sftp commands with a file called
<code>sftp\_script</code> in your home directory, like this: </p>
<div class="codehilite"><pre><span></span>cd legion_files  
put my_results  
exit
</pre></div>


<p>and then supply this script name to the sftp command using the
-b option, like this:</p>
<div class="codehilite"><pre><span></span>sftp -b sftp_script &lt;my_remote_userid&gt;@&lt;my_remote_hostname&gt;
</pre></div>


<p>This command will perform the same transfer as the first scp
example above, and should be submitted as a batch job using a similar
job script to the one shown.</p>
<p>As usual, please contact research-computing@ucl.ac.uk if you need any
assistance with doing this.</p>
<h1 id="iridis-specific-information">Iridis-Specific Information<a class="headerlink" href="#iridis-specific-information" title="Permanent link">&para;</a></h1>
<p>The Iridis service was discontinued on 31 July 2015, and all the data it
held in UCL user home directories was copied to Legion, into a read-only
storage area only accessible from the Legion transfer node, login05:
```</p>
<p><code>/imports/iridis/</code><username></p>
<p>``` This data was kept available until 18th April 2016.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../X11_Forwarding_with_Windows/" title="X11 Forwarding With Windows" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                X11 Forwarding With Windows
              </span>
            </div>
          </a>
        
        
          <a href="../Resource_Allocation/" title="Resource Allocation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Resource Allocation
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014 - 2018 UCL Research Computing Group
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/UCL-RITS" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.39abc4af.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>