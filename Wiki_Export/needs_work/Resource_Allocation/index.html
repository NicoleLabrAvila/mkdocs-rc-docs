



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for the centrally provided Research Computing HPC services at UCL.">
      
      
        <link rel="canonical" href="https://www.rc.ucl.ac.uk/docs/Wiki_Export/needs_work/Resource_Allocation/">
      
      
        <meta name="author" content="UCL RCAS Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.3">
    
    
      
        <title>Resource Allocation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#7e57c2">
      
    
    
      <script src="../../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../stylesheets/tweaks.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#governance" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://www.rc.ucl.ac.uk/docs/" title="UCL Research Computing Documentation" aria-label="UCL Research Computing Documentation" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../../../img/portico.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              UCL Research Computing Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Resource Allocation
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/UCL-RITS/mkdocs-rc-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    UCL-RITS/mkdocs-rc-docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://www.rc.ucl.ac.uk/docs/" title="UCL Research Computing Documentation" class="md-nav__button md-logo">
      
        <img alt="logo" src="../../../img/portico.svg" width="48" height="48">
      
    </a>
    UCL Research Computing Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/UCL-RITS/mkdocs-rc-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    UCL-RITS/mkdocs-rc-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Account_Services/" title="Account Services" class="md-nav__link">
      Account Services
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Additional_Resource_Requests/" title="Additional Resource Requests" class="md-nav__link">
      Additional Resource Requests
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Contact_Us/" title="Contact and Support" class="md-nav__link">
      Contact and Support
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Example_Jobscripts/" title="Example Jobscripts" class="md-nav__link">
      Example Jobscripts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Experienced_Users/" title="Quick Start Guide for Experienced HPC Users" class="md-nav__link">
      Quick Start Guide for Experienced HPC Users
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Job_Results/" title="Where do my results go?" class="md-nav__link">
      Where do my results go?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../New_Users/" title="Guide for New Users" class="md-nav__link">
      Guide for New Users
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Planned_Outages/" title="Planned Outages" class="md-nav__link">
      Planned Outages
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../Terms_and_Conditions/" title="Terms and Conditions" class="md-nav__link">
      Terms and Conditions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../UCL_Service_For_Me/" title="UCL Service For Me" class="md-nav__link">
      UCL Service For Me
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../howto/" title="How do I?" class="md-nav__link">
      How do I?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Background
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Background
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Background/Cluster_Computing/" title="Cluster Computing" class="md-nav__link">
      Cluster Computing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Clusters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Clusters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Clusters/Myriad/" title="Myriad" class="md-nav__link">
      Myriad
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Clusters/Legion/" title="Legion" class="md-nav__link">
      Legion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Clusters/Grace/" title="Grace" class="md-nav__link">
      Grace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Clusters/Kathleen/" title="Kathleen" class="md-nav__link">
      Kathleen
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Clusters/Thomas/" title="MMM Thomas" class="md-nav__link">
      MMM Thomas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Clusters/Michael/" title="MMM Michael" class="md-nav__link">
      MMM Michael
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      Installed Software Lists
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        Installed Software Lists
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Installed_Software_Lists/module-packages/" title="General Software Lists" class="md-nav__link">
      General Software Lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Installed_Software_Lists/python-packages/" title="Python Packages" class="md-nav__link">
      Python Packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Installed_Software_Lists/r-packages/" title="R Packages" class="md-nav__link">
      R Packages
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Other Services
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Other Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Other_Services/Aristotle/" title="Aristotle" class="md-nav__link">
      Aristotle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Other_Services/UCL_UK_e-Science_Certificates/" title="UCL UK e-Science Certificates" class="md-nav__link">
      UCL UK e-Science Certificates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17">
    
    <label class="md-nav__link" for="nav-17">
      Paid For Resources
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        Paid For Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Paid-For_Resources/How_to_Use/" title="How to Use" class="md-nav__link">
      How to Use
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Paid-For_Resources/Purchasing_in_Myriad/" title="Purchasing in Myriad" class="md-nav__link">
      Purchasing in Myriad
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-18" type="checkbox" id="nav-18">
    
    <label class="md-nav__link" for="nav-18">
      Software Guides
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-18">
        Software Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Software_Guides/Matlab/" title="MATLAB" class="md-nav__link">
      MATLAB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Software_Guides/Singularity/" title="Singularity" class="md-nav__link">
      Singularity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../Software_Guides/Other_Software/" title="Other Software" class="md-nav__link">
      Other Software
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#governance" class="md-nav__link">
    Governance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-allocation-on-legion" class="md-nav__link">
    Resource Allocation on Legion
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assignment-rules" class="md-nav__link">
    Assignment rules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wallclock-times" class="md-nav__link">
    Wallclock times
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estimating-resources-needed-by-your-job" class="md-nav__link">
    Estimating resources needed by your job
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-requests-must-be-integers" class="md-nav__link">
    Memory requests must be integers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resource-allocation-on-grace" class="md-nav__link">
    Resource Allocation on Grace
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jobs-of-less-than-32-cores" class="md-nav__link">
    Jobs of less than 32 cores
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wallclock-times_1" class="md-nav__link">
    Wallclock times
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#priority-access-requests" class="md-nav__link">
    Priority access requests
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/UCL-RITS/mkdocs-rc-docs/blob/master/mkdocs-project-dir/docs/Wiki_Export/needs_work/Resource_Allocation.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Resource Allocation</h1>
                
                <p>For information about requesting additional resources see
<a href="Additional_Resource_Requests" title="wikilink">Additional Resource Requests</a>.</p>
<h2 id="governance">Governance<a class="headerlink" href="#governance" title="Permanent link">§</a></h2>
<p>Resource allocation policy for Research Computing services is determined by the
<a href="http://www.ucl.ac.uk/isd/about/governance/research-it/crag">CRAG</a>,
informed by the user community.</p>
<p>The CRAG reports to the 
<a href="http://www.ucl.ac.uk/isd/staff/research_services/governance/research-computing-group">Research Computing Governance Group</a>.</p>
<h2 id="resource-allocation-on-legion">Resource Allocation on Legion<a class="headerlink" href="#resource-allocation-on-legion" title="Permanent link">§</a></h2>
<p>Allocation of computational resources on the Legion cluster is based on
a combination of job class, wait time and fairshare.</p>
<p>Resource allocation is based on four features of job:</p>
<ul>
<li>Memory size</li>
<li>Core count</li>
<li>Licenses</li>
<li>Wall clock time</li>
</ul>
<p>Legion has nodes of several different types, listed below. The tmpfs is
the maximum size of $TMPDIR that can be
requested.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Cores per node</th>
<th>RAM per node</th>
<th>Connectivity</th>
<th>Nodes</th>
<th>Total Cores</th>
<th>tmpfs</th>
</tr>
</thead>
<tbody>
<tr>
<td>T</td>
<td>32</td>
<td>1511GB</td>
<td>Ethernet</td>
<td>6</td>
<td>192</td>
<td>1536G</td>
</tr>
<tr>
<td>U</td>
<td>16</td>
<td>64GB</td>
<td>Infiniband</td>
<td>160</td>
<td>2560</td>
<td>792G</td>
</tr>
<tr>
<td>V</td>
<td>12 + 2 GPU</td>
<td>48GB</td>
<td>Ethernet</td>
<td>8</td>
<td>96 + 16GPU</td>
<td>358G</td>
</tr>
<tr>
<td>X</td>
<td>12</td>
<td>24GB</td>
<td>Infiniband</td>
<td>144</td>
<td>1728</td>
<td>173G</td>
</tr>
<tr>
<td>Y</td>
<td>12</td>
<td>24GB</td>
<td>Ethernet</td>
<td>99</td>
<td>1188</td>
<td>406G</td>
</tr>
<tr>
<td>Z</td>
<td>12</td>
<td>48GB</td>
<td>Ethernet</td>
<td>4</td>
<td>48</td>
<td>173G</td>
</tr>
<tr>
<td>S</td>
<td>16 + 2 MIC</td>
<td>64GB</td>
<td>Infiniband</td>
<td>10</td>
<td>160 + 20 MIC</td>
<td>1536G</td>
</tr>
<tr>
<td>O</td>
<td>16</td>
<td>64GB</td>
<td>Infiniband</td>
<td>36</td>
<td>576</td>
<td>792G</td>
</tr>
<tr>
<td>P</td>
<td>12 + 1 K40c GPU</td>
<td>8GB</td>
<td>Ethernet</td>
<td>1</td>
<td>12 + 1 K40c GPU</td>
<td>112G</td>
</tr>
<tr>
<td>Q</td>
<td>32</td>
<td>512GB</td>
<td>Ethernet</td>
<td>1</td>
<td>32</td>
<td>1024G</td>
</tr>
</tbody>
</table>
<p>Nodes of type W are the original nodes (now retired), whilst X, Y and Z
are the new nodes added during the Legion III upgrade. Nodes of type X
are for running parallel jobs, nodes of type Y are used for running jobs
which can be run within one node (less than 12 cores) and nodes of type
Z are used for jobs which require more memory. Types T, U and V were
added later. Type T are for jobs with a high memory requirement. Type V
are only for jobs which request a GPU. Type S are only for jobs which
request a mic. The largest job that the general population of users can
run on nodes of types U, S, O and Q will vary as they are mostly paid
for by specific research groups.</p>
<p>When a job is submitted it is evaluated and automatically assigned to
one of several classes, based on information in the job submission
script:</p>
<p>In addition, as before, scheduling is based on the job type of the job.
There are three job types:</p>
<ul>
<li>Multi-node jobs: These jobs require more than one node of the type
    they have been assigned to.</li>
<li>Short, single-node jobs: These have a wall-clock time less than or
    equal to X minutes and fit within a single node of the type they
    have been assigned to.</li>
<li>Long, single-node jobs: These have a wall-clock time greater than X
    and fit within a single node of the type they have been assigned to.</li>
<li>X is under constant evaluation: Assumptions should not be made as to
    the value of X at any given time.</li>
</ul>
<h3 id="assignment-rules">Assignment rules<a class="headerlink" href="#assignment-rules" title="Permanent link">§</a></h3>
<p>The policy defined by the CRAG for scheduling jobs is based on the eight
rules below:</p>
<ol>
<li>Resource requests that cannot be satisfied will cause the job to be
    rejected at submit time.</li>
<li>The number of nodes a job will use will be determined independently
    for each node class. When this is combined with run time
    requirements, may cause the jobs to not be eligible to run on a
    particular node class.</li>
<li>Single node jobs will share the node they run on with other single
    node jobs to the limit of available resources.</li>
<li>Long Single Node jobs are banned from node classes X and U.</li>
<li>Multi node jobs are banned from node classes Y and Z.</li>
<li>Only jobs that request a GPU can use nodes of type V.</li>
<li>Only jobs that request a MIC can use nodes of type S.</li>
<li>Nodes of type T have a scheduling policy like Y/Z for jobs that use
    > 64GB RAM. Other jobs are limited to 1hr. (Eg smp jobs of 32 cores
    need to request > 2G per core).</li>
<li>Jobs requiring Licenses will run on those nodes where they consume
    the fewest licenses.</li>
<li>Users can specify which node classes their jobs will run on,
    provided that they do not contradict the policy set above.</li>
<li>Any other resource matching will be done automatically by the
    scheduler to soonest available resource.</li>
</ol>
<h2 id="wallclock-times">Wallclock times<a class="headerlink" href="#wallclock-times" title="Permanent link">§</a></h2>
<p>Specific information related to wall-clock times and where jobs will run
is summarised in the table
below.</p>
<table>
<thead>
<tr>
<th>Wall clock time</th>
<th>X</th>
<th>Y</th>
<th>Z</th>
<th>T</th>
<th>U</th>
<th>V</th>
<th>S</th>
</tr>
</thead>
<tbody>
<tr>
<td>\&lt;=15 mins</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node*</td>
<td>\&lt;=1 node*</td>
<td>\&lt;=10 nodes*</td>
</tr>
<tr>
<td>\&lt;=12 hours</td>
<td>2-72 nodes</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node*</td>
<td>\&lt;=1-36 nodes*</td>
<td>\&lt;=1 node*</td>
<td>\&lt;=10 nodes*</td>
</tr>
<tr>
<td>\&lt;=1 day</td>
<td>2-42 nodes</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node*</td>
<td>2-25 nodes*</td>
<td>\&lt;=1 node*</td>
<td>\&lt;=1 node*</td>
</tr>
<tr>
<td>\&lt;=2 days</td>
<td>2-21 nodes</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node</td>
<td>\&lt;=1 node*</td>
<td>2-16 nodes*</td>
<td>\&lt;=1 node*</td>
<td>\&lt;=1 node*</td>
</tr>
<tr>
<td>\&lt;=3 days</td>
<td>0</td>
<td>1 core</td>
<td>1 core</td>
<td>1 core*</td>
<td>0*</td>
<td>1 core*</td>
<td>0</td>
</tr>
</tbody>
</table>
<p><em>* marks combinations that have other restrictions as described in the
rules above.</em></p>
<p>The priority of jobs is set as follows:</p>
<ol>
<li>\&lt;=15 min and \&lt;=1 node and eligible for X are set the lowest
    priority because it is expected that these jobs will obtain
    resources via backfill.</li>
<li>All other jobs have priority set inversely proportional to the
    wall-clock time.</li>
<li>With the exception of the jobs in point 1, there is no relationship
    between priority and job size.</li>
<li>Fair-share and wait times are weighted in the priority calculation.</li>
</ol>
<p>In addition to the priority assigned based on job classes, jobs will
also derive priority from fair share; jobs that have been waiting a long
time, or have been submitted by a user and/or project that has not
otherwise consumed many resources recently, will also acquire a higher
priority.</p>
<p>Note that despite these priority assignments it may take longer to
assign resources for large jobs than for small ones. However, the higher
priority assigned to large jobs should prevent smaller jobs from
delaying them. Jobs that request 64 nodes or a little less may be
delayed by the requirement to run within a computational unit.</p>
<h2 id="estimating-resources-needed-by-your-job">Estimating resources needed by your job<a class="headerlink" href="#estimating-resources-needed-by-your-job" title="Permanent link">§</a></h2>
<p>It can be difficult to know where to start when estimating the resources
your job will need. One way you can find out what resources your jobs
need is to submit one job which requests far more than you think
necessary, and gather data on what it actually uses. If you aren't sure
what 'far more' entails, request the maximum wallclock time and job size
that will fit on one node, and reduce this after you have some idea.</p>
<p>Run your program as: </p>
<div class="codehilite"><pre><span></span><code>/usr/bin/time --verbose myprogram myargs
</code></pre></div>


<p>where <code>myprogram myargs</code> is however you normally run your
program, with whatever options you pass to it.</p>
<p>When your job finishes, you will get output about the resources it used
and how long it took - the relevant one for memory is <code>maxrss</code> (maximum
resident set size) which roughly tells you the largest amount of memory
it used.</p>
<p>Remember that memory requests in your jobscript are always per core, so
check the total you are requesting is sensible - if you increase it too
much you may end up with a job that cannot be submitted.</p>
<p>You can also look at <code>nodesforjob $jobID</code> when a job is running to see a
snapshot of the memory, swap and load on the nodes your job is running
on. (But if your job is sharing nodes it will show you the total
resources in use, not just those used by your job). Bear in mind that
memory use can increase over time as your job runs.</p>
<h2 id="memory-requests-must-be-integers">Memory requests must be integers<a class="headerlink" href="#memory-requests-must-be-integers" title="Permanent link">§</a></h2>
<p>SoGE's memory specifiers are integers followed by a multiplier letter.
Valid multiplier letters are k, K, m, M, g, G, t, and T, where k means
multiply the value by 1000, K multiply by 1024, m multiply by 1000×1000,
M multiply by 1024×1024, g multiply by 1000×1000×1000, G multiply by
1024×1024×1024, t multiply by 1000×1000×1000×1000, and T multiply by
1024×1024×1024×1024. If no multiplier is present, the value is just
counted in bytes.</p>
<p>These are valid: </p>
<div class="codehilite"><pre><span></span><code>#$ -l mem=2500M
#$ -l mem=1G
#$ -l mem=1T
</code></pre></div>


<p>but you cannot ask for 1.5G.</p>
<h2 id="resource-allocation-on-grace">Resource Allocation on Grace<a class="headerlink" href="#resource-allocation-on-grace" title="Permanent link">§</a></h2>
<p>Grace is intended for parallel multi-node jobs requesting a minimum of
32 cores.</p>
<p>All nodes on Grace have 16 cores and 64G RAM. The maximum tmpfs that can
be requested is 100G.</p>
<h3 id="jobs-of-less-than-32-cores">Jobs of less than 32 cores<a class="headerlink" href="#jobs-of-less-than-32-cores" title="Permanent link">§</a></h3>
<p>Jobs of less than 32 cores will only run on two of the compute nodes and
the maximum wallclock for those is 12hrs, intended for testing purposes.
If people submit many jobs of that size, the queue for those two nodes
will be long. These workloads should be run on <a href="Myriad">Myriad</a>.</p>
<h3 id="wallclock-times_1">Wallclock times<a class="headerlink" href="#wallclock-times_1" title="Permanent link">§</a></h3>
<table>
<thead>
<tr>
<th>Cores</th>
<th>Max wallclock</th>
</tr>
</thead>
<tbody>
<tr>
<td>32-256</td>
<td>48hrs</td>
</tr>
<tr>
<td>257-512</td>
<td>24hrs</td>
</tr>
<tr>
<td>513-10912</td>
<td>12hrs</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>You may have a very long queue time if you try to use the maximum job
size...</p>
<h2 id="priority-access-requests">Priority access requests<a class="headerlink" href="#priority-access-requests" title="Permanent link">§</a></h2>
<p>Requests to run jobs outside the above limits should be addressed to
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#99;&#45;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#117;&#99;&#108;&#46;&#97;&#99;&#46;&#117;&#107;">&#114;&#99;&#45;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#117;&#99;&#108;&#46;&#97;&#99;&#46;&#117;&#107;</a> for review (see <a href="Priority_Access">Priority Access</a>). A clear justification for
the request must be included; where requests are made to run jobs for
longer than 3 days, it is expected:</p>
<ul>
<li>the code to be run has been optimised for the cluster you are running it on</li>
<li>the code to be run cannot do checkpoint/restart without major
    modifications.</li>
</ul>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Managing_Data_on_RC_Systems/" title="Managing Data on RC Systems" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Managing Data on RC Systems
              </span>
            </div>
          </a>
        
        
          <a href="../Running_Hybrid_OpenMP__MPI_Code/" title="Running Hybrid OpenMP/MPI Code" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Running Hybrid OpenMP/MPI Code
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014 - 2020 UCL Research Computing Group
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/UCL-RITS" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>