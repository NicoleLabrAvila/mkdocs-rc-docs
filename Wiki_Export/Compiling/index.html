
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the centrally provided Research Computing HPC services at UCL.">
      
      
        <meta name="author" content="UCL RCAS Team">
      
      
        <link rel="canonical" href="https://www.rc.ucl.ac.uk/docs/Wiki_Export/Compiling/">
      
      <link rel="icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.2.15">
    
    
      
        <title>Compiling Your Code - UCL Research Computing Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.c382b1dc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
      
    
    
    
      
    
    
      <link rel="stylesheet" href="../../stylesheets/tweaks.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#compiling-your-code" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="UCL Research Computing Documentation" class="md-header__button md-logo" aria-label="UCL Research Computing Documentation" data-md-component="logo">
      
  <img src="../../img/portico.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            UCL Research Computing Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Compiling Your Code
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/UCL-RITS/mkdocs-rc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    UCL-RITS/mkdocs-rc-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="UCL Research Computing Documentation" class="md-nav__button md-logo" aria-label="UCL Research Computing Documentation" data-md-component="logo">
      
  <img src="../../img/portico.svg" alt="logo">

    </a>
    UCL Research Computing Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/UCL-RITS/mkdocs-rc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    UCL-RITS/mkdocs-rc-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Account_Services/" class="md-nav__link">
        Account Services
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Additional_Resource_Requests/" class="md-nav__link">
        Additional Resource Requests
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Contact_Us/" class="md-nav__link">
        Contact and Support
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Example_Jobscripts/" class="md-nav__link">
        Example Jobscripts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Experienced_Users/" class="md-nav__link">
        Quick Start Guide for Experienced HPC Users
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Interactive_Jobs/" class="md-nav__link">
        Interactive Job Sessions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Job_Results/" class="md-nav__link">
        Where do my results go?
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../New_Users/" class="md-nav__link">
        Guide for New Users
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Planned_Outages/" class="md-nav__link">
        Planned Outages
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Remote_Access/" class="md-nav__link">
        Remote Access
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Status_page/" class="md-nav__link">
        Status of machines
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Terms_and_Conditions/" class="md-nav__link">
        Terms and Conditions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../UCL_Service_For_Me/" class="md-nav__link">
        UCL Service For Me
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../howto/" class="md-nav__link">
        How To
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          Background
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Background" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Background
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Background/Cluster_Computing/" class="md-nav__link">
        Cluster Computing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          Clusters
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Clusters" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          Clusters
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Clusters/Myriad/" class="md-nav__link">
        Myriad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Clusters/Grace/" class="md-nav__link">
        Grace
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Clusters/Kathleen/" class="md-nav__link">
        Kathleen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Clusters/Thomas/" class="md-nav__link">
        MMM Thomas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Clusters/Michael/" class="md-nav__link">
        MMM Michael
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Clusters/Acknowledging_RC_Systems/" class="md-nav__link">
        Acknowledging the Use of RC Systems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Clusters/Young/" class="md-nav__link">
        MMM Hub Young
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18" type="checkbox" id="__nav_18" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18">
          Installed Software Lists
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installed Software Lists" data-md-level="1">
        <label class="md-nav__title" for="__nav_18">
          <span class="md-nav__icon md-icon"></span>
          Installed Software Lists
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Installed_Software_Lists/module-packages/" class="md-nav__link">
        General Software Lists
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Installed_Software_Lists/python-packages/" class="md-nav__link">
        Python Packages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Installed_Software_Lists/r-packages/" class="md-nav__link">
        R Packages
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_19" type="checkbox" id="__nav_19" >
      
      
      
      
        <label class="md-nav__link" for="__nav_19">
          Other Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other Services" data-md-level="1">
        <label class="md-nav__title" for="__nav_19">
          <span class="md-nav__icon md-icon"></span>
          Other Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Other_Services/Aristotle/" class="md-nav__link">
        Aristotle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Other_Services/RStudio/" class="md-nav__link">
        RStudio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Other_Services/UCL_UK_e-Science_Certificates/" class="md-nav__link">
        UCL UK e-Science Certificates
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_20" type="checkbox" id="__nav_20" >
      
      
      
      
        <label class="md-nav__link" for="__nav_20">
          Paid-For Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Paid-For Resources" data-md-level="1">
        <label class="md-nav__title" for="__nav_20">
          <span class="md-nav__icon md-icon"></span>
          Paid-For Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Paid-For_Resources/How_to_Use/" class="md-nav__link">
        How to Use
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Paid-For_Resources/Purchasing_in_Myriad/" class="md-nav__link">
        Purchasing in Myriad
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_21" type="checkbox" id="__nav_21" >
      
      
      
      
        <label class="md-nav__link" for="__nav_21">
          Software Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Software Guides" data-md-level="1">
        <label class="md-nav__title" for="__nav_21">
          <span class="md-nav__icon md-icon"></span>
          Software Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Software_Guides/ANSYS/" class="md-nav__link">
        ANSYS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Software_Guides/Matlab/" class="md-nav__link">
        MATLAB
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Software_Guides/Singularity/" class="md-nav__link">
        Singularity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Software_Guides/R/" class="md-nav__link">
        R
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Software_Guides/Other_Software/" class="md-nav__link">
        Other Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Software_Guides/Installing_Software/" class="md-nav__link">
        Installing Software
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_22" type="checkbox" id="__nav_22" >
      
      
      
      
        <label class="md-nav__link" for="__nav_22">
          Walkthroughs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Walkthroughs" data-md-level="1">
        <label class="md-nav__title" for="__nav_22">
          <span class="md-nav__icon md-icon"></span>
          Walkthroughs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Walkthroughs/Logging_In/" class="md-nav__link">
        Logging In
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#download-your-code" class="md-nav__link">
    Download your code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-your-modules" class="md-nav__link">
    Set up your modules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#available-compilers" class="md-nav__link">
    Available compilers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#build-systems" class="md-nav__link">
    Build systems
  </a>
  
    <nav class="md-nav" aria-label="Build systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automake-configure" class="md-nav__link">
    Automake configure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cmake" class="md-nav__link">
    CMake
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make" class="md-nav__link">
    Make
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#avx-instructions" class="md-nav__link">
    AVX instructions
  </a>
  
    <nav class="md-nav" aria-label="AVX instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intel-compilers" class="md-nav__link">
    Intel compilers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gnu-compilers" class="md-nav__link">
    GNU compilers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restrict-node-type" class="md-nav__link">
    Restrict node type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-for-avx" class="md-nav__link">
    Test for AVX
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#blas-and-lapack" class="md-nav__link">
    BLAS and LAPACK
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-your-path-and-other-environment-variables" class="md-nav__link">
    Set your PATH and other environment variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    Python
  </a>
  
    <nav class="md-nav" aria-label="Python">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-compiler-module" class="md-nav__link">
    Set compiler module
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-your-own-packages-in-the-same-virtualenv" class="md-nav__link">
    Install your own packages in the same virtualenv
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-your-own-virtualenvs" class="md-nav__link">
    Use your own virtualenvs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-via-setuppy" class="md-nav__link">
    Installing via setup.py
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python-script-executable-paths" class="md-nav__link">
    Python script executable paths
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#perl" class="md-nav__link">
    Perl
  </a>
  
    <nav class="md-nav" aria-label="Perl">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpan" class="md-nav__link">
    CPAN
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#set-perl5lib-paths" class="md-nav__link">
    Set PERL5LIB paths
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#errors-when-using-non-default-perl-versions" class="md-nav__link">
    Errors when using non-default Perl versions
  </a>
  
    <nav class="md-nav" aria-label="Errors when using non-default Perl versions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#warningspm" class="md-nav__link">
    warnings.pm
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#libperlso-not-found" class="md-nav__link">
    libperl.so not found
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#r" class="md-nav__link">
    R
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiling-with-mpi" class="md-nav__link">
    Compiling with MPI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-openmp" class="md-nav__link">
    Enabling OpenMP
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problems" class="md-nav__link">
    Problems
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/UCL-RITS/mkdocs-rc-docs/blob/master/mkdocs-project-dir/docs/Wiki_Export/Compiling.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="compiling-your-code">Compiling Your Code<a class="headerlink" href="#compiling-your-code" title="Permanent link">§</a></h1>
<h2 id="download-your-code">Download your code<a class="headerlink" href="#download-your-code" title="Permanent link">§</a></h2>
<p>Use wget or curl to download the source code for the software you want
to install to your account. There might be binaries available, but they
often won't work on our clusters because they were compiled for other
machines with other library versions available. Use tar or unzip or
similar depending on archive type to uncompress your source code.</p>
<div class="codehilite"><pre><span></span><code>wget https://www.example.com/program.tar.gz
tar -xvf program.tar.gz
</code></pre></div>

<p>You won't be able to use a package manager like yum, you'll need to
follow the manual installation instructions for a user-space install
(not using sudo).</p>
<h2 id="set-up-your-modules">Set up your modules<a class="headerlink" href="#set-up-your-modules" title="Permanent link">§</a></h2>
<p>Before you start compiling, you need to make sure you have the right
compilers, libraries and other tools available for your software. If you
haven't changed anything, you will have the default modules loaded. For
more information on how to use modules, see <a href="RC_Systems_user_environment">RC Systems user environment</a>.</p>
<p>Check what the instructions for your software tell you about compiling
it. If the website doesn't say much, the source code will hopefully have
a <code>README</code> or <code>INSTALL</code> file.</p>
<p>You may want to use a different compiler - the default is the Intel
compiler.</p>
<p><code>module avail compilers</code> will show you all the compiler modules
available. Most Open Source software tends to assume you're using GCC
and OpenMPI (if it uses MPI) and is most tested with that combination,
so if it doesn't specify you may want to begin there (do check what the
newest modules available are):</p>
<div class="codehilite"><pre><span></span><code>module unload compilers mpi mkl
module load compilers/gnu/4.9.2  
module load mpi/openmpi/1.10.1/gnu-4.9.2
</code></pre></div>

<h2 id="available-compilers">Available compilers<a class="headerlink" href="#available-compilers" title="Permanent link">§</a></h2>
<p>The following compilers are available and supported on Legion:</p>
<ul>
<li>Intel C, C++ and Fortran</li>
<li>GNU C, C++ and Fortran</li>
</ul>
<p>We currently have a limited number of licenses for the Intel compilers
so only a certain number of users can use them simultaneously. This
means that your compilation may fail with an error complaining about not
being able to obtain a valid license. If this happens, simply wait for a
few minutes and try again.</p>
<p>In addition to the supported tools, there are a number of tools
installed on Legion which are not supported (for example the PGI
compilers) which were installed to build certain supported packages.
Users who use the unsupported packages do so at their own risk.</p>
<h2 id="build-systems">Build systems<a class="headerlink" href="#build-systems" title="Permanent link">§</a></h2>
<p>Most software will use some kind of build system to manage how files are
compiled and linked and in what order. Here are a few common ones.</p>
<h3 id="automake-configure">Automake configure<a class="headerlink" href="#automake-configure" title="Permanent link">§</a></h3>
<p><a href="http://www.gnu.org/software/automake/manual/automake.html">Automake</a>
will generate the Makefile for you and hopefully pick up sensible
options through configuration. You can give it an install prefix to tell
it where to install (or you can build it in place and not use make
install at all).</p>
<div class="codehilite"><pre><span></span><code>./configure --prefix=/home/username/place/you/want/to/install  
make  
# if it has a test suite, good idea to use it  
make test   
make install
</code></pre></div>

<p>If it has more configuration flags, you can use <code>./configure --help</code> to
view them.</p>
<p>Usually configure will create a config.log: you can look in there to
find if any tests have failed or things you think should have been
picked up haven't.</p>
<h3 id="cmake">CMake<a class="headerlink" href="#cmake" title="Permanent link">§</a></h3>
<p><a href="http://www.cmake.org/">CMake</a> is another build system. It will have a
CMakeFile or the instructions will ask you to use cmake or ccmake rather
than make. It also generates Makefiles for you. <code>ccmake</code> is a
terminal-based interactive interface where you can see what variables
are set to and change them, then repeatedly configure until everything
is correct, generate the Makefile and quit. <code>cmake</code> is the commandline
version. The process tends to go like
this:</p>
<div class="codehilite"><pre><span></span><code>ccmake CMakeLists.txt  
# press c to configure - will pick up some options  
# press t to toggle advanced options  
# keep making changes and configuring until no more errors or changes  
# press g to generate and exit  
make  
# if it has a test suite, good idea to use it  
make test   
make install
</code></pre></div>

<p>If you need to rerun ccmake and reconfigure, remember to delete the
<code>CMakeCache.txt</code> file, or you'll be wondering why your changes haven't taken.
Turning on verbose Makefiles in ccmake is also useful if your code
didn't compile first time - you'll be able to see what flags the
compiler or linker is actually being given when it fails.</p>
<h3 id="make">Make<a class="headerlink" href="#make" title="Permanent link">§</a></h3>
<p>Your code may just come with a Makefile and have no configure, in which
case the generic way to compile it is as follows:</p>
<div class="codehilite"><pre><span></span><code>make targetname
</code></pre></div>

<p>There's usually a default target, which <code>make</code> on its own will use. If
you need to change any configuration options, you'll need to edit those
sections of the Makefile (at the top, where the variables/flags are
defined).</p>
<p>Here are some typical variables you may want to change in a Makefile.</p>
<p>These are what compilers/mpi wrappers to use - these are also defined by
the compiler modules, so you can see what they should be. Intel would be
icc, icpc, ifort, for example. If it's a program that can be compiled
using MPI and only has a variable for CC, then set that to mpicc.</p>
<div class="codehilite"><pre><span></span><code>CC=gcc  
CXX=g++  
FC=gfortran  
MPICC=mpicc  
MPICXX=mpicxx  
MPIF90=mpif90
</code></pre></div>

<p>CFLAGS and LDFLAGS are flags for the compiler and linker respectively,
and there might be LIBS or INCLUDE as well. When linking a library with
the name libfoo, use <code>-lfoo</code>.</p>
<div class="codehilite"><pre><span></span><code>CFLAGS=&quot;-I/path/to/include&quot;  
LDFLAGS=&quot;-L/path/to/foo/lib -L/path/to/bar/lib&quot;  
LDLIBS=&quot;-lfoo -lbar&quot;
</code></pre></div>

<p>Remember to <code>make clean</code> first if you are recompiling with new options!</p>
<h2 id="avx-instructions">AVX instructions<a class="headerlink" href="#avx-instructions" title="Permanent link">§</a></h2>
<p><strong>Note</strong>: Legion's current login nodes are of a newer architecture than
some of the compute nodes - the login nodes have AVX instructions but
the XYZ type nodes do not. This means if you want your code to run on
the older nodes, some compiler options cannot be used (e.g.
<code>-march=native</code>, <code>-mtune</code>, <code>-xHost</code>) or your code will segfault.</p>
<p>You can either build the code on the login nodes and restrict your jobs
to only running on the newer nodes, compile the code with appropriate
options for all the nodes, or compile your code inside a job that is
running on the XYZ nodes (or during a qrsh session on the same).</p>
<h3 id="intel-compilers">Intel compilers<a class="headerlink" href="#intel-compilers" title="Permanent link">§</a></h3>
<p>To tell the Intel compilers to build for SSE4.2 instructions and no AVX,
add this to CFLAGS (and CXXFLAGS if relevant):</p>
<div class="codehilite"><pre><span></span><code>CFLAGS=-axSSE4.2
</code></pre></div>

<p>(Also see <code>icc -help codegen</code>).</p>
<h3 id="gnu-compilers">GNU compilers<a class="headerlink" href="#gnu-compilers" title="Permanent link">§</a></h3>
<p>To tell GCC to build for SSE4.2 without AVX, add this to CFLAGS (and
CXXFLAGS if relevant): </p>
<div class="codehilite"><pre><span></span><code>CFLAGS=-march=nehalem
</code></pre></div>

<h3 id="restrict-node-type">Restrict node type<a class="headerlink" href="#restrict-node-type" title="Permanent link">§</a></h3>
<p>To restrict a job to newer nodes only, put this in your script:</p>
<div class="codehilite"><pre><span></span><code>#$ -ac allow=LMNOPQSTU
</code></pre></div>

<p>You can also compile one version without AVX and one with, so you can
take advantage of the newer nodes when possible. You could use
<code>hostname</code> in your jobscript to check what type of node you were on and
run the appropriate binary. Hostnames begin with node-x for an X-type
node, node-u for a U-type and so on.</p>
<h3 id="test-for-avx">Test for AVX<a class="headerlink" href="#test-for-avx" title="Permanent link">§</a></h3>
<p>We have a script that will let you test whether your compiled code is
using AVX instructions. If you pass it a directory it will recursively
test everything in there. Note that if your code builds multiple kernels
and so can choose based on where it runs which instructions to use (like
MKL) then this will find AVX instructions but they won't cause your code
to segfault.</p>
<div class="codehilite"><pre><span></span><code>find /home/username/path/ -perm /111 -type f | xargs /shared/ucl/apps/rcops_scripts/hasavx -q
</code></pre></div>

<h2 id="blas-and-lapack">BLAS and LAPACK<a class="headerlink" href="#blas-and-lapack" title="Permanent link">§</a></h2>
<p>BLAS and LAPACK are provided as part of MKL, OpenBLAS or ATLAS. There
are several different OpenBLAS and ATLAS modules on Legion for different
compilers. MKL is available in the Intel compiler module.</p>
<p>Your code may try to link <code>-lblas -llapack</code>: this isn't the right way to
use BLAS and LAPACK with MKL or ATLAS (our OpenBLAS now has symlinks
that allow you to do this).</p>
<ul>
<li><a href="MKL_on_Legion" title="wikilink">MKL on Legion</a></li>
<li><a href="OpenBLAS_on_Legion" title="wikilink">OpenBLAS on Legion</a></li>
<li><a href="ATLAS_on_Legion" title="wikilink">ATLAS on Legion</a></li>
</ul>
<h2 id="set-your-path-and-other-environment-variables">Set your PATH and other environment variables<a class="headerlink" href="#set-your-path-and-other-environment-variables" title="Permanent link">§</a></h2>
<p>After you have installed your software, you'll need to add it to your
<code>PATH</code> environment variable so you can run it without having to give the
full path to its location.</p>
<p>Put this in your <code>~/.bashrc</code> file so it will set this with every new session you
create. Replace username with your username and point to the directory
your binary was built in (frequently <code>program/bin</code>). This adds it to the
front of your PATH, so if you install a newer version of something, it
will be found before the system one.</p>
<div class="codehilite"><pre><span></span><code>export PATH=/home/username/location/of/software/binary:$PATH
</code></pre></div>

<p>If you built a library that you'll go on to compile other software with,
you probably want to also add the lib directory to your
LD_LIBRARY_PATH and LIBRARY_PATH, and the include directory to CPATH
(add export statements as above). This may mean your configure step will
pick your library up correctly without any further effort on your part.</p>
<p>To make these changes to your .bashrc take effect in your current
session:</p>
<div class="codehilite"><pre><span></span><code>source ~/.bashrc
</code></pre></div>

<h2 id="python">Python<a class="headerlink" href="#python" title="Permanent link">§</a></h2>
<p>There are <code>python2/recommended</code> and <code>python3/recommended</code> bundles. These
use a virtualenv and have pip set up for you. They both have numpy and
scipy available.</p>
<h3 id="set-compiler-module">Set compiler module<a class="headerlink" href="#set-compiler-module" title="Permanent link">§</a></h3>
<p>The Python versions on Legion were built with GCC. You can run them with
the default Intel compilers loaded because everything depends on the
gcc-libs/4.9.2 module. When you are building your own Python packages
you should have the GCC compiler module loaded however, to avoid the
situation where you build a package with the Intel compiler and then try
to run it with GCC, in which case it will be unable to find
Intel-specific instructions.</p>
<div class="codehilite"><pre><span></span><code>module unload compilers
module load compilers/gnu/4.9.2
</code></pre></div>

<p>If you get an error like this when trying to run something, recheck what
compiler you used.</p>
<div class="codehilite"><pre><span></span><code>undefined symbol: __intel_sse2_strrchr
</code></pre></div>

<h3 id="install-your-own-packages-in-the-same-virtualenv">Install your own packages in the same virtualenv<a class="headerlink" href="#install-your-own-packages-in-the-same-virtualenv" title="Permanent link">§</a></h3>
<p>This will use our central virtualenv, which contains a number of
packages already installed.</p>
<div class="codehilite"><pre><span></span><code>pip install --user &lt;python2pkg&gt;  
pip3 install --user &lt;python3pkg&gt;
</code></pre></div>

<p>These will install into <code>.python2local</code> or <code>.python3local</code> directories in your home directory, respectively.</p>
<p>To see what is already installed, the <a href="https://github.com/UCL-RITS/rcps-buildscripts/blob/master/lists/python-shared.list">Python-shared list</a>
shows what is installed for both Python2 and 3, while the <a href="https://github.com/UCL-RITS/rcps-buildscripts/blob/master/lists/python-2.list">Python2 list</a>
and <a href="https://github.com/UCL-RITS/rcps-buildscripts/blob/master/lists/python-3.list">Python3 list</a>
show what is only installed for one or the other. (There may also be
prereqs that aren't listed explicitly - pip will tell you if something
is already installed as long as you have the recommended module bundle
loaded).</p>
<h3 id="use-your-own-virtualenvs">Use your own virtualenvs<a class="headerlink" href="#use-your-own-virtualenvs" title="Permanent link">§</a></h3>
<p>If you need different packages that are not compatible with the central
installs, you can create a new virtualenv and only yours will be
available.</p>
<div class="codehilite"><pre><span></span><code>virtualenv &lt;DIR&gt; 
source &lt;DIR&gt;/bin/activate
</code></pre></div>

<p>Your bash prompt will show you that a different virtualenv is active.</p>
<h3 id="installing-via-setuppy">Installing via setup.py<a class="headerlink" href="#installing-via-setuppy" title="Permanent link">§</a></h3>
<p>If you need to install using setup.py, you can use the <code>--user</code> flag and
as long as one of the python bundles is loaded, it will install into the
same <code>.python2local</code> or <code>.python3local</code> as pip and you won't need to add
any new paths to your environment.</p>
<div class="codehilite"><pre><span></span><code>python setup.py install --user
</code></pre></div>

<p>You can alternatively use <code>--prefix</code> in which case you will have to set
the install prefix to somewhere in your space, and also set PYTHONPATH
and PATH to include your install location. Some installs won't create
the prefix directory for you, in which case create it first. This is
useful if you want to keep this package entirely separate and only in
your paths on demand.</p>
<div class="codehilite"><pre><span></span><code>export PYTHONPATH=/home/username/your/path/lib/python2.7/site-packages:$PYTHONPATH  
# if necessary, create install path  
mkdir -p home/username/your/path/lib/python2.7/site-packages  
python setup.py install --prefix=/home/username/your/path

# add these to your .bashrc or jobscript  
export PYTHONPATH=/home/username/your/path/lib/python2.7/site-packages:$PYTHONPATH  
export PATH=/home/username/your/path/bin:$PATH
</code></pre></div>

<p>Check that the PATH is where your Python executables were installed, and
the PYTHONPATH is correct. It will tend to tell you at install time if
you need to change or create the PYTHONPATH directory.</p>
<h3 id="python-script-executable-paths">Python script executable paths<a class="headerlink" href="#python-script-executable-paths" title="Permanent link">§</a></h3>
<p>If you have an executable python script giving the location of python
like this, and it fails because that python doesn't exist in that
location or isn't the one that has the additional packages installed:</p>
<div class="codehilite"><pre><span></span><code>#!/usr/bin/python2.6
</code></pre></div>

<p>You should change it so it uses the first python found in your
environment. </p>
<div class="codehilite"><pre><span></span><code>#!/usr/bin/env python 
</code></pre></div>

<h2 id="perl">Perl<a class="headerlink" href="#perl" title="Permanent link">§</a></h2>
<p>Perl modules will freqently have a Makefile.PL (especially if you
download the tar files from CPAN.org yourself). You can install manually
as:</p>
<div class="codehilite"><pre><span></span><code>perl Makefile.PL PREFIX=/home/username/your/perl/location
make
make install
</code></pre></div>

<h3 id="cpan">CPAN<a class="headerlink" href="#cpan" title="Permanent link">§</a></h3>
<p>You can use CPAN to download and install modules locally for you. The
first time you run the <code>cpan</code> command, it will create a <code>.cpan</code>
directory for you and ask you to give it configuration settings or allow
it to set them automatically.</p>
<p>You need to tell it where you want your install prefix to be.</p>
<p>If it is automatically configured, you need to edit these lines in your
<code>.cpan/CPAN/MyConfig.pm</code>, for example if you want it to be in a lib
directory in your home (change username to your own username):</p>
<div class="codehilite"><pre><span></span><code><span class="s">&#39;make_install_arg&#39;</span> <span class="o">=&gt;</span> <span class="sx">q[PREFIX=/home/username/lib]</span><span class="p">,</span>
 <span class="c1"># other lines in here  </span>
<span class="s">&#39;makepl_arg&#39;</span> <span class="o">=&gt;</span> <span class="sx">q[PREFIX=/home/username/lib]</span><span class="p">,</span>
<span class="s">&#39;mbuild_install_arg&#39;</span> <span class="o">=&gt;</span> <span class="sx">q[PREFIX=/home/username/lib]</span><span class="p">,</span>
<span class="s">&#39;mbuildpl_arg&#39;</span> <span class="o">=&gt;</span> <span class="sx">q[--install_base /home/username/lib]</span><span class="p">,</span>
</code></pre></div>

<p>It will download and build modules inside .cpan and install them where
you specified.</p>
<h3 id="set-perl5lib-paths">Set PERL5LIB paths<a class="headerlink" href="#set-perl5lib-paths" title="Permanent link">§</a></h3>
<p>If you install your own Perl or Perl modules, you will need to append
them to your PERL5LIB:</p>
<div class="codehilite"><pre><span></span><code>export PERL5LIB=/home/username/your/perl/location:$PERL5LIB
</code></pre></div>

<p>If you installed with CPAN, you may need to add several paths to this
based on the layout it creates inside your nominated Perl directory.</p>
<h3 id="errors-when-using-non-default-perl-versions">Errors when using non-default Perl versions<a class="headerlink" href="#errors-when-using-non-default-perl-versions" title="Permanent link">§</a></h3>
<h4 id="warningspm">warnings.pm<a class="headerlink" href="#warningspm" title="Permanent link">§</a></h4>
<p>If you are using a version of Perl that is not the default system Perl
and get strange errors when trying to run a Perl script, particularly
ones about
warnings.pm:</p>
<div class="codehilite"><pre><span></span><code>Search pattern not terminated at /shared/ucl/apps/perl/5.20.0/lib/5.20.0/warnings.pm line 1099
</code></pre></div>

<p>then you need to edit the script so that instead of beginning with
<code>#!/usr/bin/perl</code>, it begins with <code>#!/usr/bin/env perl</code>. Otherwise it
will try to use the old system Perl libraries with your newer Perl
executable, which won't work.</p>
<h4 id="libperlso-not-found">libperl.so not found<a class="headerlink" href="#libperlso-not-found" title="Permanent link">§</a></h4>
<p>You probably built perl without telling it to build the shared library
too. Add <code>-Duseshrplib</code> to your build flags.</p>
<h2 id="r">R<a class="headerlink" href="#r" title="Permanent link">§</a></h2>
<p>There are instructions on installing and using local R packages in
<a href="https://wiki.rc.ucl.ac.uk/wiki/R_on_Legion#Using_your_own_local_R_packages">Using your own local R packages</a>.</p>
<h2 id="compiling-with-mpi">Compiling with MPI<a class="headerlink" href="#compiling-with-mpi" title="Permanent link">§</a></h2>
<p>OpenMPI and Intel MPI are available. Certain programs do not work well
with one or the other, so if you are having problems try the other one.
Intel MPI is based on MPICH, so if the program you are compiling
mentions that, try Intel MPI first.</p>
<p>The Intel MPI is threadsafe; some versions of OpenMPI aren't.</p>
<p>Note that OpenMPI 1.8.4 had a segv bug in non-blocking collectives that
is fixed in OpenMPI 1.10.1.</p>
<h2 id="enabling-openmp">Enabling OpenMP<a class="headerlink" href="#enabling-openmp" title="Permanent link">§</a></h2>
<p>To enable OpenMP with the Intel compilers, you simply need to add
<code>-openmp</code> to your compile line. With the GNU compilers you need to add
<code>-fopenmp</code>.</p>
<h2 id="problems">Problems<a class="headerlink" href="#problems" title="Permanent link">§</a></h2>
<p>If you experience problems building your applications, please contact
your local IT support in the first instance. We are available at
rc-support AT ucl.ac.uk to help you if you still cannot build your app
or if you need to report a problem with our software stack.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Building_and_Running_Matlab_Programs/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Building and Running Matlab Programs" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Building and Running Matlab Programs
            </div>
          </div>
        </a>
      
      
        
        <a href="../Connecting_to_RC_Systems/" class="md-footer__link md-footer__link--next" aria-label="Next: Connecting to RC Systems" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Connecting to RC Systems
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014 - 2020 UCL Research Computing Group
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/UCL-RITS" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["instant"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.a6c66575.min.js"></script>
      
    
  </body>
</html>