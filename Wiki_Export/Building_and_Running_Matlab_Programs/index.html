
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the centrally provided Research Computing HPC services at UCL.">
      
      
      
        <meta name="author" content="UCL RCAS Team">
      
      
        <link rel="canonical" href="https://www.rc.ucl.ac.uk/docs/Wiki_Export/Building_and_Running_Matlab_Programs/">
      
      <link rel="shortcut icon" href="../../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.4">
    
    
      
        <title>Building and Running Matlab Programs - UCL Research Computing Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.15aa0b43.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.75751829.min.css">
        
          
          
          <meta name="theme-color" content="#7e56c2">
        
      
    
    
    
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/tweaks.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#before-you-start-here-are-the-caveats" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://www.rc.ucl.ac.uk/docs/" title="UCL Research Computing Documentation" class="md-header-nav__button md-logo" aria-label="UCL Research Computing Documentation">
      
  <img src="../../img/portico.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            UCL Research Computing Documentation
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Building and Running Matlab Programs
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/UCL-RITS/mkdocs-rc-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    UCL-RITS/mkdocs-rc-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://www.rc.ucl.ac.uk/docs/" title="UCL Research Computing Documentation" class="md-nav__button md-logo" aria-label="UCL Research Computing Documentation">
      
  <img src="../../img/portico.svg" alt="logo">

    </a>
    UCL Research Computing Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/UCL-RITS/mkdocs-rc-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    UCL-RITS/mkdocs-rc-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Account_Services/" class="md-nav__link">
      Account Services
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Additional_Resource_Requests/" class="md-nav__link">
      Additional Resource Requests
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Contact_Us/" class="md-nav__link">
      Contact and Support
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Example_Jobscripts/" class="md-nav__link">
      Example Jobscripts
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Experienced_Users/" class="md-nav__link">
      Quick Start Guide for Experienced HPC Users
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Interactive_Jobs/" class="md-nav__link">
      Interactive Job Sessions
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Job_Results/" class="md-nav__link">
      Where do my results go?
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../New_Users/" class="md-nav__link">
      Guide for New Users
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Planned_Outages/" class="md-nav__link">
      Planned Outages
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Remote_Access/" class="md-nav__link">
      Remote Access
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../Terms_and_Conditions/" class="md-nav__link">
      Terms and Conditions
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../UCL_Service_For_Me/" class="md-nav__link">
      UCL Service For Me
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../../howto/" class="md-nav__link">
      How To
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15" >
    
    <label class="md-nav__link" for="nav-15">
      Background
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Background" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        <span class="md-nav__icon md-icon"></span>
        Background
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../Background/Cluster_Computing/" class="md-nav__link">
      Cluster Computing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16" >
    
    <label class="md-nav__link" for="nav-16">
      Clusters
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Clusters" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        <span class="md-nav__icon md-icon"></span>
        Clusters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../Clusters/Myriad/" class="md-nav__link">
      Myriad
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Clusters/Legion/" class="md-nav__link">
      Legion
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Clusters/Grace/" class="md-nav__link">
      Grace
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Clusters/Kathleen/" class="md-nav__link">
      Kathleen
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Clusters/Thomas/" class="md-nav__link">
      MMM Thomas
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Clusters/Michael/" class="md-nav__link">
      MMM Michael
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Clusters/Young/" class="md-nav__link">
      MMM Hub Young
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17" >
    
    <label class="md-nav__link" for="nav-17">
      Installed Software Lists
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Installed Software Lists" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        <span class="md-nav__icon md-icon"></span>
        Installed Software Lists
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../Installed_Software_Lists/module-packages/" class="md-nav__link">
      General Software Lists
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Installed_Software_Lists/python-packages/" class="md-nav__link">
      Python Packages
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Installed_Software_Lists/r-packages/" class="md-nav__link">
      R Packages
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-18" type="checkbox" id="nav-18" >
    
    <label class="md-nav__link" for="nav-18">
      Other Services
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Other Services" data-md-level="1">
      <label class="md-nav__title" for="nav-18">
        <span class="md-nav__icon md-icon"></span>
        Other Services
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../Other_Services/Aristotle/" class="md-nav__link">
      Aristotle
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Other_Services/UCL_UK_e-Science_Certificates/" class="md-nav__link">
      UCL UK e-Science Certificates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-19" type="checkbox" id="nav-19" >
    
    <label class="md-nav__link" for="nav-19">
      Paid-For Resources
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Paid-For Resources" data-md-level="1">
      <label class="md-nav__title" for="nav-19">
        <span class="md-nav__icon md-icon"></span>
        Paid-For Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../Paid-For_Resources/How_to_Use/" class="md-nav__link">
      How to Use
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Paid-For_Resources/Purchasing_in_Myriad/" class="md-nav__link">
      Purchasing in Myriad
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-20" type="checkbox" id="nav-20" >
    
    <label class="md-nav__link" for="nav-20">
      Software Guides
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Software Guides" data-md-level="1">
      <label class="md-nav__title" for="nav-20">
        <span class="md-nav__icon md-icon"></span>
        Software Guides
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../../Software_Guides/ANSYS/" class="md-nav__link">
      ANSYS
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Software_Guides/Matlab/" class="md-nav__link">
      MATLAB
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Software_Guides/Singularity/" class="md-nav__link">
      Singularity
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Software_Guides/R/" class="md-nav__link">
      R
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Software_Guides/Other_Software/" class="md-nav__link">
      Other Software
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../../Software_Guides/Installing_Software/" class="md-nav__link">
      Installing Software
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#before-you-start-here-are-the-caveats" class="md-nav__link">
    Before you start, here are the caveats:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compiling-your-program" class="md-nav__link">
    Compiling your program:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-important-mcc-options" class="md-nav__link">
    Some important mcc options:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-important-runtime-options" class="md-nav__link">
    Some important runtime options:
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-submission-scripts" class="md-nav__link">
    Job submission scripts:
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/UCL-RITS/mkdocs-rc-docs/blob/master/mkdocs-project-dir/docs/Wiki_Export/Building_and_Running_Matlab_Programs.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Building and Running Matlab Programs</h1>
                
                <h3 id="before-you-start-here-are-the-caveats">Before you start, here are the caveats:<a class="headerlink" href="#before-you-start-here-are-the-caveats" title="Permanent link">§</a></h3>
<p>Although full Matlab is now available on Legion, you can still compile
Matlab programs on an external machine and then run them on Legion using
the Matlab runtime.</p>
<p>Your Matlab program must be compiled using a 64bit Linux version of the
Matlab compiler; the compiled code is not cross-platform compatible so
it cannot be built on OS X and then transferred to Legion.</p>
<p>Piping code into the Matlab compiler will not work, and the main routine
being executed must be converted into a proper Matlab function.</p>
<p>When arguments are passed into compiled Matlab executable, the compiled
code does not automatically convert them to the required type (i.e.
float or integer) as Matlab does from the command line. In this case the
arguments, where necessary, must be converted to numbers using the
<code>str2num()</code> function.</p>
<p>Because of the way Matlab threads work, you <strong>must</strong> request exclusive
access to Legion nodes when running compiled Matlab programs.</p>
<h3 id="compiling-your-program">Compiling your program:<a class="headerlink" href="#compiling-your-program" title="Permanent link">§</a></h3>
<p>The Matlab code is must be compiled using the <strong>mcc</strong> tool; this must be
initially run as <code>mcc -setup</code> before anything is built. The mcc tool can
actually be invoked from the interpreter command prompt and executing
<code>help mcc</code> will give you quite a lot of information about how to use the
tool, along with examples.</p>
<p>All <code>.m</code> files must be built into the compiled code with the first .m
referenced in the build line acting as the main entry point for the
built code. It may be useful to include data files in the built code
which are handled in the build line using the <code>-a &lt;datafile&gt;</code> option.
Please remember to make the <code>.m</code> file an actual function and all other
dependencies sub-functions, otherwise the compiled code will not
execute.</p>
<h3 id="some-important-mcc-options">Some important mcc options:<a class="headerlink" href="#some-important-mcc-options" title="Permanent link">§</a></h3>
<ul>
<li><code>-m</code>: this is option which runs the macro to generate a C stand-alone
    application.<br />
<code>-R</code>: specify runtime options for the Matlab compiler runtime.</li>
</ul>
<h3 id="some-important-runtime-options">Some important runtime options:<a class="headerlink" href="#some-important-runtime-options" title="Permanent link">§</a></h3>
<ul>
<li><code>-nojvm</code>: disables the java virtual machine, which may speed-up
    certain codes. This option cannot be used if you are planning to
    have, for example pdf files or any other plots produced as output of
    your run.<br />
<code>-nodisplay</code>: prevents anything being displayed on the screen, can be
    useful if this happens with the application as this would not work
    correctly in batch mode.<br />
<code>--singleCompThread</code>: use only a single computational thread,
    otherwise Matlab will try to use more than one thread when the
    operation being performed supports multi threading. This is an
    alternative to allocating a whole Legion node to your job.</li>
</ul>
<p>Once the application has been built, there should be an executable named
after the prefix of the <code>.m</code> file, generally <code>&lt;app name&gt;.m</code>, and a shell
script with the name <code>run\_&lt;app name&gt;.sh</code> - both these files need to be
transferred to Legion.</p>
<p>We have installed a runtime environment on Legion here:</p>
<div class="codehilite"><pre><span></span><code>/shared/ucl/apps/Matlab/R2011a/Runtime7.15/v715/
</code></pre></div>

<p>If you have been given pre-compiled code by someone else, the
application may not work as the Matlab runtime version must reasonably
match that of the Matlab compiler that was used to build the
application. The runtime is freely distributable and can be found in the
installation directory of Matlab. The runtime has a GUI install
interface and it can be installed at any location in your home
directory.</p>
<p>For more information, please read your Matlab documentation.</p>
<h3 id="job-submission-scripts">Job submission scripts:<a class="headerlink" href="#job-submission-scripts" title="Permanent link">§</a></h3>
<p>There are three things that you must take into account:</p>
<ol>
<li>The location of the Matlab compiler runtime needs to be passed to
    the script used to run the compiled Matlab code as the first
    argument.</li>
<li>The compiler runtime needs a directory (cache) to unpack files to
    when it is running. By default this directory is in the home folder.
    This needs to be changed since the home directory is not writable in
    Legion from the compute nodes. Since the Matlab runs will be single
    node jobs, the cache location should be in the storage on the
    compute nodes which is stored in <code>TMPDIR</code>.</li>
<li>Use the <code>-ac exclusive</code> SGE option to request exclusive access to a
    Legion node unless you use the <code>--singleCompThread</code> Matlab option.</li>
</ol>
<p>For example, a multi-threaded serial script should look something like:</p>
<div class="codehilite"><pre><span></span><code><span class="ch">#!/bin/bash -l</span>
<span class="c1"># Batch script to run a serial job on Legion under SGE.</span>

<span class="c1"># Force bash as the executing shell.</span>
<span class="c1">#$ -S /bin/bash</span>

<span class="c1"># Request ten minutes of wallclock time (format hours:minutes:seconds).</span>
<span class="c1">#$ -l h_rt=0:10:0</span>

<span class="c1"># Request 1 gigabyte of RAM </span>
<span class="c1">#$ -l mem=1G</span>

<span class="c1"># Select 12 threads (the most possible on Legion).</span>
<span class="c1">#$ -l thr=12</span>

<span class="c1"># The way Matlab threads work requires Matlab to not share nodes with other</span>
<span class="c1"># jobs.</span>
<span class="c1">#$ -ac exclusive</span>

<span class="c1"># Set the name of the job.</span>
<span class="c1">#$ -N Matlab_Job_1</span>

<span class="c1"># Set the working directory to somewhere in your scratch space.</span>
<span class="c1"># For example:</span>
<span class="c1">##$ -wd /home//Scratch</span>
<span class="c1"># Alternatively, you can automatically use the current working directory </span>
<span class="c1">#  if you launch your job from anywhere *within ~/Scratch*</span>
<span class="c1">#$ -cwd</span>

<span class="c1"># store the MATLAB runtime path in a global environment variable (MCR_HOME)</span>
<span class="nb">export</span> <span class="nv">MCR_HOME</span><span class="o">=</span>/shared/ucl/apps/Matlab/R2011a/Runtime7.15/v715/

<span class="c1"># the path to the Matlab cache is stored in the global variable MCR_CACHE_ROOT </span>
<span class="nb">export</span> <span class="nv">MCR_CACHE_ROOT</span><span class="o">=</span><span class="nv">$TMPDIR</span>/mcr_cache

<span class="c1"># make sure the directory in MCR_CACHE_ROOT exists</span>
mkdir -p <span class="nv">$MCR_CACHE_ROOT</span>

<span class="c1"># Run the executable, passing the path stored in MCR_HOME as the first argument.</span>
<span class="c1"># There is no need to pass the content of MCR_CACHE_ROOT as an argument to the</span>
<span class="c1"># to the run_appname.sh script since it is a variable that the Matlab runtime is aware of.</span>
./run_appname.sh <span class="nv">$MCR_HOME</span> <span class="o">[</span>arguments list<span class="o">]</span>

<span class="c1"># Preferably, tar-up (archive) all output files onto the shared scratch area</span>
tar zcvf <span class="nv">$HOME</span>/Scratch/files_from_job_<span class="si">${</span><span class="nv">JOB_ID</span><span class="si">}</span>.tgz <span class="nv">$TMPDIR</span>

<span class="c1"># Make sure you have given enough time for the copy to complete!</span>
</code></pre></div>

<p>For any queries and problem reports, please contact
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#114;&#99;&#45;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#117;&#99;&#108;&#46;&#97;&#99;&#46;&#117;&#107;">&#114;&#99;&#45;&#115;&#117;&#112;&#112;&#111;&#114;&#116;&#64;&#117;&#99;&#108;&#46;&#97;&#99;&#46;&#117;&#107;</a>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../Additional_Resource_Requests/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Additional Resource Requests
              </div>
            </div>
          </a>
        
        
          <a href="../Compiling/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Compiling Your Code
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2014 - 2020 UCL Research Computing Group
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/UCL-RITS" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.93c04032.min.js"></script>
      <script src="../../assets/javascripts/bundle.83e5331e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ['instant'],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>